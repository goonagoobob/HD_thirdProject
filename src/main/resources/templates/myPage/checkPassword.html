<html lang="ko" class="" xmlns:th="http://www.thymeleaf.org" 
xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
<meta name="_csrf" th:content="${_csrf.token}">
<meta name="_csrf_header" th:content="${_csrf.headerName}">

<script type="text/javascript">
function check(){
	console.log("hello");
	
	var mpassword = document.getElementById("j_password").value;
	var header = $("meta[name='_csrf_header']").attr("content");
    var token = $("meta[name='_csrf']").attr("content");
	let element = {"j_password" : mpassword};
	console.log(mpassword);
	console.log(header);
	console.log(token)
	
	/* $.ajax({
		type:'post',
		url: 'myPage/checkPasswordForm',
		data : mpassword,
		contentType : "application/json; charset=utf-8",
		dataType : "text",
		beforeSend : function(jqXHR, settings) {

	         jqXHR.setRequestHeader(header, token);
		},
		success : function(jqXHR) {
			console.log("success");
		},
		error : function(jqXHR) {
			console.log("error");
		}
	}); */
}
</script>

<!-- #2894 - 카카오광고 집행 위한 픽셀&SDK 삽입 -->
<script type="text/javascript" async=""
	src="https://www.googletagmanager.com/gtag/js?id=G-RPZ82BN53C&amp;l=dataLayer&amp;cx=c"></script>
<script type="text/javascript" async=""
	src="https://www.google-analytics.com/analytics.js"></script>
<script async="" defer=""
	src="https://cdn.megadata.co.kr/dist/prod/enp_tracker_self_hosted.min.js"></script>
<script async=""
	src="https://www.googletagmanager.com/gtm.js?id=GTM-KSHFVVQ"></script>
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script
	src="https://connect.facebook.net/signals/config/1947530058811697?v=2.9.95&amp;r=stable"
	async=""></script>

<script type="text/javascript" charset="UTF-8"
	src="//t1.daumcdn.net/adfit/static/kp.js"></script>

<script type="text/javascript">
    var appYn = "N";
    var appOs = ""; //ios, android

    var uid = "";
    var pageUid = "hsPersonInfomationChangePWCheckPage";
    var chkScreenPage = [];


    if (appYn == 'Y') {  //appì¼ëë§ ì²´í¬
      if (uid == "snsMain" || uid == "snsDetail" || uid == "snsMyProfile" || uid == "snsCollectionDetail" || uid == "snsSearchList"
        || chkScreenPage.indexOf(pageUid) > -1) { //íì©íì´ì§
        if (appOs == "ios") { //ios
          webkit.messageHandlers.screenShotEnable.postMessage("false");
        } else { //android
          Android.screenShotEnable("false");
        }
      } else { //ì¬ì©ìí¨
        if (appOs == "ios") { //ios
          webkit.messageHandlers.screenShotEnable.postMessage("true");
        } else { //android
          Android.screenShotEnable("true");
        }
      }
    }

  </script>

<title>개인정보 변경 비밀번호 체크 | 더한섬닷컴</title>
<link rel="shortcut icon"
	href="http://thehandsome.com/_ui/mobile/common/images/common/thehandsome_ic_16x16.ico">
<link rel="apple-touch-icon"
	href="http://thehandsome.com/_ui/mobile/common/images/common/app_ban_logo.png">
<link rel="apple-touch-icon-precomposed"
	href="http://thehandsome.com/_ui/mobile/common/images/common/app_ban_logo.png">
<link rel="apple-touch-icon-120x120"
	href="http://thehandsome.com/_ui/mobile/common/images/common/app_ban_logo.png">
<link rel="apple-touch-icon-120x120-precomposed"
	href="http://thehandsome.com/_ui/mobile/common/images/common/app_ban_logo.png">

<!-- <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> -->


<link rel="shortcut icon" type="image/x-icon" media="all" href="//">

<link
	href="http://thehandsome.com/_ui/handsomemobile/css/handsomecss/font_443.css"
	rel="stylesheet" type="text/css">
<link
	href="http://thehandsome.com/_ui/handsomemobile/css/handsomecss/jquery-ui.css"
	rel="stylesheet" type="text/css">
<link
	href="http://thehandsome.com/_ui/handsomemobile/css/handsomecss/selectordie.css"
	rel="stylesheet" type="text/css">
<link
	href="http://thehandsome.com/_ui/handsomemobile/css/handsomecss/default.css?202200826"
	rel="stylesheet" type="text/css">
<link
	href="http://thehandsome.com/_ui/handsomemobile/css/handsomecss/display.css?20221107"
	rel="stylesheet" type="text/css">
<link
	href="http://thehandsome.com/_ui/handsomemobile/css/handsomecss/assist.css?20220929"
	rel="stylesheet" type="text/css">
<link
	href="http://thehandsome.com/_ui/handsomemobile/css/handsomecss/devAssist.css"
	rel="stylesheet" type="text/css">

<link
	href="http://thehandsome.com/_ui/handsomemobile/css/handsomecss/popup.css"
	rel="stylesheet" type="text/css">

<script type="text/javascript">
    /*<![CDATA[*/

    var ACCMOB = { config: {} };
    ACCMOB.config.contextPath = "";
    ACCMOB.config.encodedContextPath = "/ko";
    ACCMOB.config.commonResourcePath = "http://thehandsome.com/_ui/handsomemobile/common";
    ACCMOB.config.themeResourcePath = "http://thehandsome.com/_ui/handsomemobile/theme-blue";
    ACCMOB.config.siteResourcePath = "http://thehandsome.com/_ui/handsomemobile/site-handsome";
    ACCMOB.config.rootPath = "http://thehandsome.com/_ui/handsomemobile";
    ACCMOB.config.CSRFToken = "cd96faf0-42e3-41c3-af9b-5871217b7c7e";


    /*]]>*/
  </script>
<script type="text/javascript">
    /*<![CDATA[*/
    ACCMOB.addons = {};	//JS holder for addons properties


    /*]]>*/
  </script>
<script type="text/javascript">
    var handsomePageId = "hsPersonInfomationChangePWCheckPage";
    var main_bul = false;
  </script>

<script type="text/javascript">
    var goToMySmartFilterYn = "N";
    var gnbType = "br";
    var UserAgent = navigator.platform;
    var userPhoneOs = "";
    if (UserAgent.match(/i(Phone|Pod|Pad)/i) != null) {
      userPhoneOs = "IOS";
    } else {
      userPhoneOs = "ANDROID";
    }
  </script>

<script type="text/javascript">

    var handsomeUserLoginYn = "Y";
  </script>
<script type="text/javascript">
    var isoKoYn = "Y";
  </script>
<script type="text/javascript">
    var handsomeIsoCode = "ko";
    var handsomeContextPath = "/ko"; 
  </script>

<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/jquery.min.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/jquery.vticker.js"></script>
<!-- 200318 Ã¬Â¶ÂÃªÂ°Â -->
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/masonry.pkgd.min.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/imagesloaded.pkgd.min.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/jquery.form.min.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/jquery.cookie.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/jquery-ui.min.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/swiper.min.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/selectordie.min.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/jquery.bpopup.min.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/echarts.min.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/common.js?20210501"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/assist_common.js?v=20220630"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/assist_new.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/handsome.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/common_function.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/json2.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/SsoAjax.js"></script>

<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/makePCookie.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/content.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/e-smart-zoom-jquery.min.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/popup.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/simplepagination.js"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/netfunnel.js"
	charset="UTF-8"></script>
<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/netfunnel_skin.js"
	charset="UTF-8"></script>

<script type="text/javascript"
	src="http://thehandsome.com/_ui/handsomemobile/js/unorm.js"></script>
<script>
    // 검색 결과 페이지
    if (window.location.pathname.indexOf("/hssearch/searchCount") > -1) {
      var groobeeKeyword = "";                     //검색_검색어(검색결과페이지일때 사용)
      groobee("SE", { keyword: groobeeKeyword });
    }
	
  </script>



<script type="text/javascript" async=""
	src="https://googleads.g.doubleclick.net/pagead/viewthroughconversion/943253288/?random=1675820468895&amp;cv=9&amp;fst=1675820468895&amp;num=1&amp;guid=ON&amp;resp=GooglemKTybQhCsO&amp;eid=375603261%2C466465926&amp;u_h=1067&amp;u_w=1707&amp;u_ah=1019&amp;u_aw=1707&amp;u_cd=24&amp;u_his=4&amp;u_tz=540&amp;u_java=false&amp;u_nplug=5&amp;u_nmime=2&amp;sendb=1&amp;ig=1&amp;frm=0&amp;url=https%3A%2F%2Fwww.thehandsome.com%2Fko%2Fmypage%2FpersonInfomationChangePWCheck&amp;ref=https%3A%2F%2Fwww.thehandsome.com%2Fko%2Fmypage%2FmypageFloatingPopup&amp;tiba=%EA%B0%9C%EC%9D%B8%EC%A0%95%EB%B3%B4%20%EB%B3%80%EA%B2%BD%20%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8%20%EC%B2%B4%ED%81%AC%20%7C%20%EB%8D%94%ED%95%9C%EC%84%AC%EB%8B%B7%EC%BB%B4&amp;hn=www.googleadservices.com&amp;rfmt=3&amp;fmt=4"></script>
<script
	src="https://cdn.megadata.co.kr/js/socialLink/social_sns_config_min.js"
	type="text/javascript" defer="" async=""></script>
<link rel="stylesheet" type="text/css"
	href="//code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
<link rel="stylesheet" type="text/css"
	href="//static.groobee.io/dist/g2/css/grb-recommend-list_v2.css">
</head>

<body>
	<script>
    (function () {
      if (document.cookie.indexOf('thehyundai=true') > -1) {
        var d = new Date();
        d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000));
        document.cookie = 'sslvisit=true; expires=' + d.toUTCString() + '; path=/';
      } else if (document.cookie.indexOf('rakuten=') > -1) {
        var d = new Date();
        d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000));
        document.cookie = 'sslvisit1=true; expires=' + d.toUTCString() + '; path=/';
      } else if (document.cookie.indexOf('hyundaihmall=true') > -1) {
        var d = new Date();
        d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000));
        document.cookie = 'sslvisit2=true; expires=' + d.toUTCString() + '; path=/';
      } else if (document.cookie.indexOf('fromSite') > -1) {
        var d = new Date();
        d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000));
        document.cookie = 'sslvisit3=' + "" + '; expires=' + d.toUTCString() + '; path=/';
      } else if (document.cookie.indexOf('recommender') > -1) {
        var d = new Date();
        d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000));
        document.cookie = 'sslvisit4=' + "" + '; path=/';
      }
    })();
  </script>
	<!-- Loading -->
	<div style="display: none;">
		<div id="loadingBarDiv" style="display: none;"></div>
	</div>
	<!-- //Loading -->

<!-- 	<form id="CSRFForm" action="/ko/mypage/personInfomationChangePWCheck"
		method="post">
		<div>
			<input type="hidden" name="CSRFToken"
				value="cd96faf0-42e3-41c3-af9b-5871217b7c7e">
		</div>
	</form> -->
	<div id="mapleMainPopwrap"
		style="position: fixed; top: 50%; left: 50%; width: 81.333333%; z-index: 805; transform: translate(-50%, -50%); display: none">
	</div>

	<div class="layerArea" id="mapleLayer" style="display: none;">
		<div class="layerBg"></div>
	</div>

	<!-- ################## hsome_allContents_wrapper | ë³¸ë¬¸ ì»¨íì¸  ìì­ ################## -->
	<div class="hsome_allContents_wrapper">

		<div class="hsome_allContents">
			<script type="text/javascript">
        function goMainpage() {
          window.sessionStorage.removeItem('moveYn');
          location.href = "/ko/main";
        }
      </script>

			<!-- ################## header ################## -->
			<header class="hsome_header">
				<h1 class="h_ttl ellipsis" id="headerTitle">비밀번호 재확인</h1>
				<a href="javascript:noLink();" onclick="goBack();" class="h_prev">이전
					페이지로 가기</a>
				<ul class="h_gnbMenu">
					<li class="search"><a href="/ko/mobilecommon/search"
						onclick="GA_Event('공통', '헤더', '검색');"><span>search</span></a></li>
					<li class="cart"><a href="/ko/shoppingbag"
						onclick="GA_Event('공통', '헤더', '쇼핑백');"><span>cart</span><i>1</i></a></li>
				</ul>
			</header>
			<!-- //################## header ################## -->

			<form id="bioLoginForm" method="post" action="/ko/member/bioCheck">
				<input type="hidden" id="bio_userId" name="j_username"> <input
					type="hidden" id="bio_CSRFToken" name="CSRFToken"> <input
					type="hidden" id="bio_authToken" name="authToken"> <input
					type="hidden" id="successPageUrl" name="successPageUrl">
			</form>

			<div id="contents" class="hsome_contents mp_confirm_pw_wrap">
				<div class="gray_tab">고객님의 정보보호를 위하여 비밀번호를 다시 한 번 확인합니다.</div>
				<div class="mp_input_wrap">
					<div class="user_id_wrap">
						<p class="user_id" th:text="*{mid}">님</p> 
					</div>


					<!-- input_box s -->
					<form th:action="@{/myPage/checkPasswordForm}" method='post' id="checkPasswordForm" name="checkPasswordForm">
						<!-- <input type="hidden" name="${_csrf.parameterName}"
							value="${_csrf.token}" /> -->
						<div class="input_box">
							<div class="ipt_con">
								<input type="password" id="j_password" name="j_password"
									title="비밀번호를 입력하세요." placeholder="비밀번호를 입력하세요.">
								<p class="err_box" id="msgErr"></p>
							</div>
						</div>

						<!-- input_box e -->

						<div class="btn_wrap btn_wrap_div1 mt25 pb0" id="findPW"
							style="display: none">
							<a href="#none" class="btnstl3 border_btn_gray" id="findPWBtn"><span>비밀번호
									찾기</span></a>
						</div>

						<div class="btn_wrap btn_wrap_div2 last_box">
							<a href="#none" class="btnstl3 border_btn_gray" id="cancle_btn"><span>취소</span></a>
							<button type="submit" class="btnstl3 solid_btn_blk btn_save"
								id="login_btn">
								<span>확인</span>
							</button>
							<!-- <a href="#none" class="btnstl3 solid_btn_blk btn_save" id="login_btn"></a> -->
						</div>
					</form>
				</div>

			</div>
			<!-- contents e -->




		</div>

	</div>
	<!-- ################## //hsome_allContents_wrapper | ë³¸ë¬¸ ì»¨íì¸  ìì­ ################## -->
	<script type="text/javascript">

    var inicisCookieFlag = true;
    var inicisMethod = "";
    var authData = "";


    var uagentLow = navigator.userAgent.toLocaleLowerCase()
    if (uagentLow.search("android") > -1) {

    } else if (uagentLow.search("iphone") > -1) {
      var isSafari = navigator.userAgent.toLowerCase().indexOf('safari') > -1;
      var isChrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
      if (isSafari) {
        if (isChrome) {
          isSafari = false;
        } else {
          if (navigator.userAgent.toLowerCase().indexOf('crios') > -1) {
            isSafari = false;
          }
          inicisCookieFlag = false;
        }
      }
    }


    var WPAY = {
      FORMID: 'frmWpayHspay',
      IFRAMEID: 'ifrmWpayHspayLayer',
      loading: false,
      startLoading: function () {
        WPAY.loading = true;
        showLoadingLp();
      },
      stopLoading: function () {
        setTimeout(function () {
          WPAY.loading = false;
          hideLoadingLp();
        }, 300);
      },


      addForm: function () {
        if ($('#' + WPAY.FORMID).length > 0) {
          $('#' + WPAY.FORMID).remove();
        }
        return $('<form/>', {
          id: WPAY.FORMID,
          enctype: 'application/x-www-form-urlencodeed'
        }).appendTo($('body'));
      },

      open: function (callback) {
        var depthIndex = layerNextActiveIndex();
        $('.hsome_layerpop_contents').removeClass('hspay-layer');

        callLayerPopupShow('depth' + depthIndex, function (obj) {
          $(obj).addClass('hspay-layer');
          var wpayTag = '';
          var wpayStyleTag = "width: 100%; height: 99%; margin-top: 0; z-index: 100001;display: block !important; top: 0px; left: 0; -webkit-overflow-scrolling: touch; background: #fff";
          wpayTag += '<div class="layerpop_wrap lp_loading_wrap">';
          wpayTag += '	<div class="lyrpp_top">';
          wpayTag += '		<a href="javascript:;" class="lyrpp_close lyrpp_close_stl1 btn_lyrpp_close"><span>닫기<!-- 닫기 --></span></a>';
          wpayTag += '	</div>';
          wpayTag += '	<div class="lyrpp_mid" id="wpayLoadingImage">';
          wpayTag += '		<div class="loading_box">';
          wpayTag += '			<p class="guide_box">처리중입니다</p>';
          wpayTag += '		</div>';
          wpayTag += '	</div>';
          wpayTag += '<iframe id="' + WPAY.IFRAMEID + '" name="' + WPAY.IFRAMEID + '" src="about:blank" width="100%" height="100%" style="' + wpayStyleTag + '" frameborder="0" border="0"></iframe>';

          wpayTag += '</div>';
          $(obj).html(wpayTag);

          callback();
          setTimeout(function () {
            WPAY.loadingHide();
          }, 500);
        });
      },

      loadingShow: function () {
        $('#wpayLoadingImage').show();
      },

      loadingHide: function () {
        $('#wpayLoadingImage').fadeOut();
      },

      close: function () {
        var $obj = $('.hsome_layerpop_contents.hspay-layer');
        $obj.removeClass('visible');
        $obj.removeClass('active');
        $obj.removeClass('hspay-layer');
        $('.hsome_layerpop_contents .fcs').hide();
        holdBodyHide();
        hs_allCon.css({ marginTop: curScrollPosition * -1 });
        setTimeout(function () {
          hs_allCon.css({ marginTop: 0 });
          $(window).scrollTop(curScrollPosition);
          $obj.empty();
        }, 200);
        return false;
      },

      convertFormToJSON: function convertFormToJSON(_form) {
        var obj = {};
        try {
          if (_form[0].tagName && _form[0].tagName.toUpperCase() == "FORM") {
            var arr = _form.serializeArray();
            if (arr != null) {
              $.each(arr, function () {
                obj[this.name] = this.value;
              });
            }
          }
        } catch (e) {
        } finally {
        }
        return obj;
      },


      wpaylayerConfirm: function (msg, confirmMsg, cancleMsg) {
        var layer = new layerConfirm(msg, confirmMsg, cancleMsg);
        $("#confirmCloseDiv").click(function () {
          WPAY.stopLoading();
        });
        return layer;
      }
    };



    WPAY.cardRegistSubmit = function (data) {
      var $frmWpayHspay = WPAY.addForm();
      $frmWpayHspay.empty();
      addHidden($frmWpayHspay, 'mid', data.mid);
      addHidden($frmWpayHspay, 'wpayUserKey', data.wpayUserKey);
      addHidden($frmWpayHspay, 'ci', data.ci);
      addHidden($frmWpayHspay, 'payMethod', data.payMethod);
      addHidden($frmWpayHspay, 'bankCardCode', data.bankCardCode);
      addHidden($frmWpayHspay, 'returnUrl', data.returnUrl);
      addHidden($frmWpayHspay, 'signature', data.signature);

      $frmWpayHspay.attr({
        'method': 'POST',
        'action': data.url,
        //'target': WPAY.IFRAMEID
      });
      $frmWpayHspay.submit();
    };


    WPAY.memberRegistSubmit = function (data) {
      var $frmWpayHspay = WPAY.addForm();
      $frmWpayHspay.empty();
      addHidden($frmWpayHspay, 'mid', data.mid);
      addHidden($frmWpayHspay, 'userId', data.userId);
      addHidden($frmWpayHspay, 'ci', data.ci);
      addHidden($frmWpayHspay, 'reqType', data.reqType);
      addHidden($frmWpayHspay, 'userNm', data.userNm);
      addHidden($frmWpayHspay, 'hNum', data.hNum);
      addHidden($frmWpayHspay, 'hCorp', data.hCorp);
      addHidden($frmWpayHspay, 'birthDay', data.birthDay);
      addHidden($frmWpayHspay, 'socialNo2', data.socialNo2);
      addHidden($frmWpayHspay, 'frnrYn', data.frnrYn);
      addHidden($frmWpayHspay, 'returnUrl', data.returnUrl);
      addHidden($frmWpayHspay, 'payUrl', data.payUrl);
      addHidden($frmWpayHspay, 'signature', data.signature);

      $frmWpayHspay.attr({
        'method': 'POST',
        'action': data.url,
        //'target': WPAY.IFRAMEID
      });
      $frmWpayHspay.submit();
    }


    WPAY.memberUnRegistSubmit = function (data) {
      var $frmWpayHspay = WPAY.addForm();
      $frmWpayHspay.empty();
      addHidden($frmWpayHspay, 'mid', data.mid);
      addHidden($frmWpayHspay, 'wpayUserKey', data.wpayUserKey);
      addHidden($frmWpayHspay, 'ci', data.ci);
      addHidden($frmWpayHspay, 'returnUrl', data.returnUrl);
      addHidden($frmWpayHspay, 'signature', data.signature);

      $frmWpayHspay.attr({
        'method': 'POST',
        'action': data.url,
        //'target': WPAY.IFRAMEID
      });
      $frmWpayHspay.submit();
    }


    WPAY.passwordChangeSubmit = function (data) {
      var $frmWpayHspay = WPAY.addForm();
      $frmWpayHspay.empty();
      addHidden($frmWpayHspay, 'mid', data.mid);
      addHidden($frmWpayHspay, 'wpayUserKey', data.wpayUserKey);
      addHidden($frmWpayHspay, 'ci', data.ci);
      addHidden($frmWpayHspay, 'returnUrl', data.returnUrl);
      addHidden($frmWpayHspay, 'signature', data.signature);

      $frmWpayHspay.attr({
        'method': 'POST',
        'action': data.url,
        //'target': WPAY.IFRAMEID
      });
      $frmWpayHspay.submit();
    }


    WPAY.paymentAuthSubmit = function (data) {
      var $frmWpayHspay = WPAY.addForm();
      $frmWpayHspay.empty();

      inicisMethod = "paymentAuthSubmit";
      authData = data;

      addHidden($frmWpayHspay, 'mid', data.mid);
      addHidden($frmWpayHspay, 'wpayUserKey', data.wpayUserKey);
      addHidden($frmWpayHspay, 'wpayToken', data.wpayToken);
      addHidden($frmWpayHspay, 'ci', data.ci);
      addHidden($frmWpayHspay, 'payMethod', data.payMethod);
      addHidden($frmWpayHspay, 'bankCardCode', data.bankCardCode);
      addHidden($frmWpayHspay, 'oid', data.oid);
      addHidden($frmWpayHspay, 'goodsName', data.goodsName);
      addHidden($frmWpayHspay, 'goodsPrice', data.goodsPrice);
      addHidden($frmWpayHspay, 'buyerName', data.buyerName);
      addHidden($frmWpayHspay, 'buyerTel', data.buyerTel);
      addHidden($frmWpayHspay, 'buyerEmail', data.buyerEmail);
      addHidden($frmWpayHspay, 'cardQuota', data.cardQuota);
      addHidden($frmWpayHspay, 'cardInterest', data.cardInterest);
      addHidden($frmWpayHspay, 'couponCode', data.couponCode);
      addHidden($frmWpayHspay, 'flagPin', data.flagPin);
      addHidden($frmWpayHspay, 'flagPinMsg', data.flagPinMsg);
      addHidden($frmWpayHspay, 'returnUrl', data.returnUrl);
      addHidden($frmWpayHspay, 'flagCardPoint', data.flagCardPoint);
      addHidden($frmWpayHspay, 'signature', data.signature);

      $frmWpayHspay.attr({
        'method': 'POST',
        'action': data.url,
        //'target': WPAY.IFRAMEID
      });
      $frmWpayHspay.submit();
    }


    WPAY.accesstermsSubmit = function (data) {
      var $frmWpayHspay = WPAY.addForm();
      $frmWpayHspay.empty();
      addHidden($frmWpayHspay, 'mid', data.mid);
      addHidden($frmWpayHspay, 'returnUrl', data.returnUrl);
      addHidden($frmWpayHspay, 'signature', data.signature);
      $frmWpayHspay.attr({
        'method': 'POST',
        'action': data.url,
        //'target': WPAY.IFRAMEID
      });
      $frmWpayHspay.submit();
    }



    var checkoutWpay = (function () {

      var btnCardRegist = function () {
        //if (WPAY.loading == true) return;
        //WPAY.startLoading();

        $.get("/ko/wpay/cardRegist?fncallback=checkoutCardRegistCallback&wpayReferUrl=" + referUrl, function (data) {
          if (data.resultCode == "NOT_WPAY_MEMBER") {
            var layer = WPAY.wpaylayerConfirm("간편결제 회원으로 등록되어 있지 않습니다.<br/>간편결제 가입 및 결제수단 등록을 진행하시겠습니까?", "확인", "취소");
            layer.confirmAction = function () {
              //WPAY.open(function () {
              inicisMethod = "memberRegist";
              wpayMemberRegist();
              //});
            }
            layer.cancleAction = function () {
              //WPAY.stopLoading();
            }
            return;
          }

          WPAY.open(function () {
            inicisMethod = "cardRegist";
            WPAY.cardRegistSubmit(data);
            //WPAY.stopLoading();
          });
        }).fail(function () {
          //WPAY.stopLoading();
        });
      };


      $('#card_easy_pay').on("click", "li.swiper-slide", function () {
        if ($(this).hasClass('last')) {

          checkoutWpay.resetEasyPay();
          checkoutWpay.resetGeneralPay();

          $("input[name=wpayToken]").val('');
          $("input[name=cardQuota]").val('00');
          $("input[name=cardInterest]").val('N');
        } else {

          var $cardCode = $(this).find("input[name=card_choice]"),
            selectCardCode = $("input[name=bankCardCode]").val();

          $("input[name=mode]").val($cardCode.val() == '' ? '' : 'KO001-3');
          $("input[name=bankCardCode]").val($cardCode.val());
          $("input[name=wpayToken]").val($cardCode.data('token'));
          $("input[name=cardQuota]").val('00');
          $("input[name=cardInterest]").val('N');
          if ($cardCode.val() != selectCardCode) checkoutWpay.drawInstallment($cardCode.val());
        }


        if (typeof onclickButtonTextChange === "function") {
          onclickButtonTextChange();
        }
      });


      var drawCardList = function drawCardList() {
        var drawEasyPayTag = function (data) {
          var $card_easy_pay = $('#card_easy_pay'),
            easyPay = '';

          easyPay += '	<ul class="swiper-wrapper">';

          if (data.resultCode == "0000") {
            $card_easy_pay.data('nointlist', data.noIntCardList);
            $.each(data.cardList, function (index, item) {
              var wpayCardInfo = WPAY_CARD_INFO[item.bankCardCode];

              easyPay += '		<li class="swiper-slide">';
              easyPay += '			<div class="card_item ' + wpayCardInfo.cls + '">';
              if (item.discinfo != null && item.discinfo.applYn == "Y") {
                easyPay += '	<div class="sale_now_box1910">';
                easyPay += '		<span class="sale_type1">즉시할인</span>';
                easyPay += '	</div>';
              }
              easyPay += '				<div class="radio_stl">';
              easyPay += '					<input type="radio" id="card_choice_' + item.bankCardNo + '" name="card_choice" value="' + item.bankCardCode + '" data-token="' + item.wpayToken + '" />';
              easyPay += '					<label for="card_choice_' + index + '">';
              easyPay += '						<div class="card_name">' + decodeURIComponent(item.cardName) + '</div>';
              easyPay += '					</label>';
              easyPay += '                    <input type="hidden" class="discInfo_applYn" value="' + item.discinfo.applYn + '"/>';
              easyPay += '                    <input type="hidden" class="discInfo_couponCode" value="' + item.discinfo.couponCode + '"/>';
              easyPay += '                    <input type="hidden" class="discInfo_discAmt" value="' + item.discinfo.discAmt + '"/>';
              easyPay += '                    <input type="hidden" class="discInfo_minAmt" value="' + item.discinfo.minAmt + '"/>';
              easyPay += '                    <input type="hidden" class="discInfo_maxAmt" value="' + item.discinfo.maxAmt + '"/>';
              easyPay += '				</div>';
              easyPay += '				<div class="card_num">' + $.trim(item.bankCardNo).replace(/-/g, ' ') + '</div>';
              easyPay += '				<select name="card_pay_term_' + item.bankCardCode + '" id="card_pay_term_' + item.bankCardCode + '" class="sodsb" data-custom-class="card_pay_term">';
              easyPay += '					<option value="00">일시불</option>';
              easyPay += '				</select>';
              easyPay += '			</div>';
              easyPay += '		</li>';
            });
          }

          easyPay += '		<li class="swiper-slide last">';
          easyPay += '			<div class="card_item cd_kind_add_guide">';
          easyPay += '				<p class="desc_box"><span class="under" id="linkOneBuySetting">마이페이지>정보>등록한 카드 정보</span>에서<br>신규카드를 등록하실 수 있습니다.</p>';
          easyPay += '			</div>';
          easyPay += '			<div style="hidden">';
          easyPay += '				<input type="radio" id="card_choice_" name="card_choice" value=""/>';
          easyPay += '			</div>';
          easyPay += '		</li>';
          easyPay += '	</ul>';
          $("#card_easy_pay").html(easyPay);
          $("#card_easy_pay select.sodsb").selectOrDie();

          var easyPaySwiper = $('#card_easy_pay')[0].swiper;
          if (easyPaySwiper != null) easyPaySwiper.destroy();
          swiperCardActive('swiper_card_easy_pay');

          if ($card_easy_pay.find('li.swiper-slide').length > 1) {
            $card_easy_pay.find('[name="card_choice"]:eq(0)').trigger('click');
          }
          if (typeof fn_updateDiscInfo === "function") {
            $("#oneClickCardLoadYn").val("Y");
            fn_updateDiscInfo();
          }
        }

        return $.get('/ko/wpay/cardListForPayment').done(drawEasyPayTag).fail(drawEasyPayTag);
      }

      var drawInstallment = function drawInstallment(cardCode) {
        var noIntList = $('#card_easy_pay').data('nointlist');
        var paymentPrice = parseInt($('#total').val(), 0) || 0;
        var MAX_INSTALLMENT = 12,
          MAX_NOINTSTALLMENT_PRICE = 0,
          MAX_NOINTSTALLMENT_MONTH = ["0"];
        var $selectInstallment = $("select[id='card_pay_term_" + cardCode + "']"),
          selectTag = '';

        if ($("[name='mode']").val() != "KO001-3") return;

        selectTag = '<option value="00">일시불</option>';

        if (paymentPrice >= 50000) {

          if (noIntList != null) {
            $.each(noIntList, function (idx, item) {
              if (item.cardCode != cardCode) return true;

              $.each(item.cardEventList, function (i, cardEvent) {
                if (paymentPrice >= cardEvent.amount * 10000 && cardEvent.amount * 10000 > MAX_NOINTSTALLMENT_PRICE) {
                  MAX_NOINTSTALLMENT_PRICE = cardEvent.amount * 10000;
                  MAX_NOINTSTALLMENT_MONTH = cardEvent.month;
                }
              });
            });
          }

          for (var i = 2; i <= MAX_INSTALLMENT; i++) {
            if (i < 10) {
              month = '0' + i;
            } else {
              month = i;
            }
            if ($.inArray(i.toString(), MAX_NOINTSTALLMENT_MONTH) > -1) {
              selectTag += '<option value="' + month + '" data-nointstallment="Y">' + i.toString() + '개월 무이자</option>';
            } else {
              selectTag += '<option value="' + month + '">' + i.toString() + '개월</option>';
            }
          }
        }

        $selectInstallment.html(selectTag);
        $selectInstallment.selectOrDie('update');
      }
      var drawCardListForCheckout = function () {
        return this.drawCardList().always(function () {
          var $lastSlide = $('#card_easy_pay').find('.swiper-slide.last'),
            $cardItem = $lastSlide.find('.card_item');
          $cardItem.addClass('cd_kind_add').removeClass('cd_kind_add_guide');
          $cardItem.html('<a href="javascript:;" class="card_add_btn" onclick="checkoutWpay.btnCardRegist()">카드등록</a>');
        });
      }
      var drawCardListForOneclick = function () {
        return this.drawCardList().always(function () {
          var $lastSlide = $('#card_easy_pay').find('.swiper-slide.last'),
            $cardItem = $lastSlide.find('.card_item');
          $cardItem.addClass('cd_kind_add_guide').removeClass('cd_kind_add');
          $cardItem.html('<p class="desc_box"><span class="under" id="linkOneBuySetting">마이페이지>정보>등록한 카드 정보</span>에서<br>신규카드를 등록하실 수 있습니다.</p>');
        });
      }
      return {

        drawCardList: drawCardList,


        drawCardListForCheckout: drawCardListForCheckout,


        drawCardListForOneclick: drawCardListForOneclick,


        drawInstallment: drawInstallment,


        btnCardRegist: btnCardRegist,


        resetEasyPay: function resetEasyPay() {
          $("input[name=mode]").val('');
          $("input[name=bankCardCode]").val('');
          $("input[name=card_choice]").attr("checked", false);
        },


        resetGeneralPay: function resetGeneralPay() {
          $("input[name=mode]").val('');
          $("#general_pay li").removeClass();
        }
      }
    })();

    var wpayStartMemberRegist = function () {
      if (WPAY.loading == true) return;
      WPAY.startLoading();

      wpayMemberRegist();
    }

    var wpayMemberRegist = function () {
      $.get("/ko/wpay/memberRegist?fncallback=checkoutMemberRegistCallback&wpayReferUrl=" + referUrl, function (memberData) {
        setTimeout(function () {
          if ($.trim(memberData.mid) == "") {
            layerAlert(decodeURIComponent(memberData.resultMsg) || '간편결제 회원등록을 실패하였습니다.');
            WPAY.close();
            return;
          }

          WPAY.memberRegistSubmit(memberData);
        }, 300);
      }).always(function () {
        WPAY.stopLoading();
      });
    }

    var wpayStartCardRegist = function () {
      if (WPAY.loading == true) return;
      WPAY.startLoading();

      WPAY.open(function () {
        wpayCardRegist();
      });
    }

    var wpayCardRegist = function () {
      $.get("/ko/wpay/cardRegist?fncallback=cardRegistCallback&wpayReferUrl=" + referUrl, function (data) {
        switch (data.resultCode) {
          case "0000":
            WPAY.cardRegistSubmit(data);
            break;
          case "NOT_WPAY_MEMBER":

            wpayMemberRegistConfirm();
            break;
          case "IS_ANONYMOUS":
            location.href = "/ko/member/login";
            break;
          default:
            new layerAlert(decodeURIComponent(data.resultMsg || "신규카드등록중 오류가 발생하였습니다."));
        }
      });
    }


    var checkoutMemberRegistCallback = function (resultCode, resultMsg) {
      switch (resultCode) {
        case "2406":
          if (inicisCookieFlag == false && inicisMethod == "memberRegist") {
            inicisCookieFlag = true;
            inicisIosCookieSetting();

            wpayStartMemberRegist();

          } else {
            layerWpayCookieSettingView();
            WPAY.close();
          }
          break;
        case "0000":
          $.get("/ko/wpay/cardRegist?fncallback=checkoutCardRegistCallback", function (data) {
            WPAY.cardRegistSubmit(data);
          });
          break;
        default:
          new layerAlert(resultMsg);
          WPAY.close();
          break;
      }
    }


    var checkoutCardRegistCallback = function (resultCode, resultMsg, result) {
      switch (resultCode) {
        case "2406":
          if (inicisCookieFlag == false && inicisMethod == "cardRegist") {
            inicisCookieFlag = true;
            inicisIosCookieSetting();

            wpayStartCardRegist();

          } else {
            layerWpayCookieSettingView();
            WPAY.close();
          }
          break;
        case "0000":
          checkoutWpay.drawCardListForCheckout();
          layerWpayCardDetailView(result);
          break;
        default:
          new layerAlert(resultMsg);
          WPAY.close();
          break;
      }
    }

    var layerWpayCardDetailView = function (data) {
      var cardDetailTag = '';
      var card = WPAY_CARD_INFO[data.bankCardCode];
      cardDetailTag += '<div class="layerpop_wrap lp_simple_pay_wrap">';
      cardDetailTag += '	<div class="lyrpp_top">';
      cardDetailTag += '		<a href="javascript:;" onclick="WPAY.close()" class="lyrpp_close lyrpp_close_stl1 btn_lyrpp_close"><span>닫기</span></a>';
      cardDetailTag += '		<h2>등록 완료</h2>';
      cardDetailTag += '	</div>';
      cardDetailTag += '	<div class="lyrpp_mid">';
      cardDetailTag += '		<div class="card_preview_wrap">';
      cardDetailTag += '			<div class="card_item ' + card.cls + '">';
      cardDetailTag += '				<div class="card_name">' + decodeURIComponent(card.name) + '</div>';
      cardDetailTag += '				<div class="card_num">' + $.trim(data.bankCardNo).replace(/-/g, ' ') + '</div>';
      cardDetailTag += '			</div>';
      cardDetailTag += '			<p class="msg_box">카드등록이 완료되었습니다.</p>';
      cardDetailTag += '		</div>';
      cardDetailTag += '		<ul class="btn_wrap btn_wrap_div1">';
      cardDetailTag += '			<li><a href="javascript:;" onclick="WPAY.close()" class="btnstl3 solid_btn_blk">';
      cardDetailTag += '				<span>간편결제를 등록해 주셔서 감사합니다</span></a>';
      cardDetailTag += '			</li>';
      cardDetailTag += '		</ul>';
      cardDetailTag += '	</div>';
      cardDetailTag += '</div>';

      var $wpayLayer = $('.hsome_layerpop_contents.hspay-layer');
      $wpayLayer.html(cardDetailTag);
    }

    var layerWpayCookieSettingView = function () {
      $("#btnWpayCookieSetting").click();
    }


    $(document).on('click', '#linkOneBuySetting', function () {
      window.parent.postMessage({
        func: 'oneclickPostMovePage', data: {
          url: "/ko/mypage/oneBuy"
        }
      }, '*');
    });


    var WPAY_CARD_INFO = [];
    WPAY_CARD_INFO['03'] = { 'name': '롯데카드', 'cls': 'cd_kind_lotte' };
    WPAY_CARD_INFO['04'] = { 'name': '현대카드', 'cls': 'cd_kind_hyundai' };
    WPAY_CARD_INFO['06'] = { 'name': '국민카드', 'cls': 'cd_kind_kb' };
    WPAY_CARD_INFO['11'] = { 'name': 'BC카드', 'cls': 'cd_kind_bc' };
    WPAY_CARD_INFO['12'] = { 'name': '삼성카드', 'cls': 'cd_kind_samsung' };
    WPAY_CARD_INFO['14'] = { 'name': '신한카드', 'cls': 'cd_kind_shinhan' };
    WPAY_CARD_INFO['16'] = { 'name': 'NH카드', 'cls': 'cd_kind_nh' };
    WPAY_CARD_INFO['01'] = { 'name': '하나카드', 'cls': 'cd_kind_hana' };
    WPAY_CARD_INFO['17'] = { 'name': '하나카드', 'cls': 'cd_kind_hana' };

    function inicisIosCookieSetting() {

      WPAY.close();
      var uagentLow = navigator.userAgent.toLocaleLowerCase();
      if (uagentLow.search("android") > -1) {

      } else if (uagentLow.search("iphone") > -1) {
        var isSafari = navigator.userAgent.toLowerCase().indexOf('safari') > -1;
        var isChrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
        if (isSafari) {
          if (isChrome) {
            isSafari = false;
          } else {
            if (navigator.userAgent.toLowerCase().indexOf('crios') > -1) {
              isSafari = false;
            }
            iniWin = window.open("https://wpay.inicis.com/hspay/error/cookieErr", "iniErr", "top=10, left=100, width500, height=500");
            iniWin.blur();
          }
        }
      }

    }
  </script>
	<iframe id="groobeeBox" name="groobeeBox" style="display: none;"></iframe>
</body>

</html>